

<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Add likes to your Mongoid models</title>

  
    <meta name="description" content="mongoid-likeable is a gem to add likes to your Mongoid models">
  

  <meta name="author" content="Diowa">

  <meta content="#fff" name="theme-color">

  <link rel="canonical" href="http://www.diowa.com/blog/open%20source/rubygems/2012/11/08/add-likes-to-your-mongoid-models">

  <link rel="stylesheet" type="text/css" href="/assets/application-78a3e4752264a86b7b7d484506ce0f09bd034160d413b054a56567caba5c7da4.css">
  <link href="https://netdna.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700%7COswald:300" rel="stylesheet" type="text/css" media="all">

  <!-- HTML5 shim IE8 support of HTML5 elements -->
  <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
  <![endif]-->

  <meta content="diowa" property="og:site_name">
<meta content="Add likes to your Mongoid models" property="og:title">
<meta content="article" property="og:type">
<meta content="mongoid-likeable is a gem to add likes to your Mongoid models" property="og:description">


<meta content="http://www.diowa.com/blog/open%20source/rubygems/2012/11/08/add-likes-to-your-mongoid-models" property="og:url">



<meta content="2012-11-08T00:00:00+01:00" property="article:published_time">



<meta content="cesidio" property="article:author">



<meta content="/assets/diowa-open-graph-b0adb7f74230dfa8bec7f809819b3550b2d6027a60fba6ff0c02d5967f23976f.jpg" property="og:image">



  
  <meta content="Open Source" property="article:section">
  



  
  <meta content="ruby" property="article:tag">
  
  <meta content="mongoid" property="article:tag">
  
  <meta content="open source" property="article:tag">
  



  <link href="https://plus.google.com/+CesidioDiLanda" rel="author">



  <!-- Favicons -->
  <link rel="apple-touch-icon" href="/assets/diowa-touch-icon-43b4cd7ea6b37652e51fff2e780837a5bc2532b4e77879a7f15a4d4d36d242f4.png" size="144x144">
  <link rel="icon" href="/assets/diowa-touch-icon-43b4cd7ea6b37652e51fff2e780837a5bc2532b4e77879a7f15a4d4d36d242f4.png" size="144x144">

  <!-- atom & rss feed -->
  <link href="/atom.xml" type="application/atom+xml" rel="alternate" title="Sitewide ATOM Feed">
  <link href="/rss.xml" type="application/rss+xml" rel="alternate" title="Sitewide RSS Feed">
</head>


  <body>
    <nav class="navbar navbar-default" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#navbar-responsive-collapse" aria-expanded="false">
        <span class="sr-only"></span>
        <span class="icon-bar icon-bar--top"></span>
        <span class="icon-bar icon-bar--middle"></span>
        <span class="icon-bar icon-bar--bottom"></span>
      </button>
      <a class="navbar-brand" href="/"><img alt="diowa" src="/assets/diowa-569bda59a493ab6b6d0edf5b3b6c55b585cfa9f56320bbaf1c2dd8ab6baea228.png" height="32" width="100"/></a>
    </div>
    <div class="navbar-collapse collapse" id="navbar-responsive-collapse">
      <ul class="nav navbar-nav navbar-right">
      
        <li class="active"><a href="/blog/" class="active">Blog</a></li>
      
      
        
        


  
    
      
        
        <li><a href="/about">About</a></li>
        
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
        
        <li><a href="/contact">Contact</a></li>
        
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
      
    
  




      </ul>
    </div>
  </div>
</nav>


    


<div class="container">
  <article>
    <div class="page-header">
      <h1>Add likes to your Mongoid models <small></small></h1>
      <p class="text-muted">
        Posted by <b>Cesidio Di Landa</b>
        on <b>08 November 2012</b>
      </p>
    </div>
    <div class="content">
      
<p>We needed a way to add likes to stories for <a href="http://beta.minstrels.com">Minstrels</a>. We started looking for gems that provide this functionality and we found <a href="http://github.com/tombell/mongoid-voteable">tombell/mongoid-voteable</a>, that does a little more by providing a voting system to mongoid models. So we decided to fork this gem and focus only on likes. Today we gave it back to the open source community.</p>

<!--more-->

<h3 id="installation">Installation</h3>

<p>add the gem to your <code class="highlighter-rouge">Gemfile</code></p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">gem <span class="s1">'mongoid-likeable'</span></code></pre></figure>

<h3 id="usage">Usage</h3>

<p>Include the <code class="highlighter-rouge">Mongoid::Likeable</code> module to the models you want to like.</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="k">class</span> <span class="nc">Story</span>
  <span class="kp">include</span> <span class="no">Mongoid</span><span class="o">::</span><span class="no">Document</span>
  <span class="kp">include</span> <span class="no">Mongoid</span><span class="o">::</span><span class="no">Likeable</span>

  <span class="c1"># ...</span>
<span class="k">end</span></code></pre></figure>

<p>You can like a story by simply using the <code class="highlighter-rouge">like</code> method on the model.</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="vi">@story</span> <span class="o">=</span> <span class="no">Story</span><span class="p">.</span><span class="nf">first</span>
<span class="vi">@user</span> <span class="o">=</span> <span class="no">User</span><span class="p">.</span><span class="nf">first</span>

<span class="vi">@story</span><span class="p">.</span><span class="nf">like</span> <span class="vi">@user</span>
<span class="vi">@story</span><span class="p">.</span><span class="nf">unlike</span> <span class="vi">@user</span></code></pre></figure>

<p>There is also a method to check if a user liked a model.</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="vi">@story</span><span class="p">.</span><span class="nf">liked?</span> <span class="vi">@user</span> <span class="c1"># true if the user has already liked this</span></code></pre></figure>

<p>Likes are stored in a field called <code class="highlighter-rouge">likes</code>, so you can sort models by like count.</p>

<p><strong>Note</strong>: if your users are not stored in a Mongo collection or the ID field is
not called <code class="highlighter-rouge">_id</code>, you can still pass the ID in as the second parameter instead.</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="vi">@story</span><span class="p">.</span><span class="nf">like</span> <span class="vi">@user</span><span class="p">.</span><span class="nf">id</span>

<span class="vi">@story</span><span class="p">.</span><span class="nf">liked?</span> <span class="vi">@user</span><span class="p">.</span><span class="nf">id</span></code></pre></figure>


    </div>
  </article>
  <hr>


  <ul class="list-inline">
    <li>Categories:</li>
    
    


  
    
      <li><a href="/blog/categories.html#Open Source-ref">
        Open Source
        (<span>3</span>)
      </a></li>
    
      <li><a href="/blog/categories.html#Rubygems-ref">
        Rubygems
        (<span>1</span>)
      </a></li>
    
  



  </ul>


  <ul class="list-inline">
    <li>Tags:</li>
    
    


  
    
      <li><a href="/blog/tags.html#ruby-ref">ruby (<span>2</span>)</a></li>
    
      <li><a href="/blog/tags.html#mongoid-ref">mongoid (<span>1</span>)</a></li>
    
      <li><a href="/blog/tags.html#open source-ref">open source (<span>3</span>)</a></li>
    
  



  </ul>

  <ul class="pager hidden-print">
  
    <li class="previous"><a href="/blog/products/2012/09/06/icare-carpooling-goes-open-source" title="icare: carpooling goes open source">&larr; Previous</a></li>
  
    <!--<li><a href="/blog/archive.html">Archive</a></li>-->
  
    <li class="next"><a href="/blog/open%20source/2013/06/25/ruby2-rails4-bootstrap-heroku" title="Ruby2 Rails4 Bootstrap Heroku">Next &rarr;</a></li>
  
  </ul>
  <ul class="nav nav-justified nav-blog hidden-print">
  
  
  


  
    
      
    
  
    
      
        
        <li><a href="/blog/archive"><span class="fa fa-archive"></span> Archive</a></li>
        
      
    
  
    
      
    
  
    
      
        
        <li><a href="/blog/categories"><span class="fa fa-folder-open"></span> Categories</a></li>
        
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
      
        
        <li><a href="/blog/tags"><span class="fa fa-tags"></span> Tags</a></li>
        
      
    
  




</ul>

  


  <div id="disqus_thread" class="hidden-print"></div>
<script type="text/javascript">
    
    var disqus_shortname = 'diowa'; // required: replace example with your forum shortname
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>





</div>



    <footer>
  <div class="footer-wrapper">
    <img src="/assets/diowa-footer-285e6f3dc582358bcc50309309e5a28fd2e070a7aa883a13c700e100b891d712.png" width="56" height="64" alt="diowa" class="footer-logo">
    <div class="container">
      <ul class="list-inline pull-right">
        
          <li><a href="/blog/">Blog</a></li>
        
        
        
        


  
    
      
        
        <li><a href="/about">About</a></li>
        
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
        
        <li><a href="/contact">Contact</a></li>
        
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
  
    
      
    
  
    
      
    
  
    
  
    
      
    
  




      </ul>
      <ul class="list-inline">
        <li>&copy; diowa 2018</li>
      </ul>
    </div>
  </div>
</footer>
<script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
<script async="" type="text/javascript" src="/assets/application-cdb9a8c5f535b6bcc2dbd71f7a29d680698c39f9437754b07fc4d40011943c4b.js"></script>



  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-39283101-1', 'diowa.com');
  ga('send', 'pageview');

</script>





<!-- Respond.js IE8 support of media queries -->
<!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->

  </body>
</html>

